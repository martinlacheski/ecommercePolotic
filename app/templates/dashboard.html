{% extends 'body.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/css/dataTables.bootstrap4.min.css' %}"/>
<link rel="stylesheet"
      href="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/css/responsive.bootstrap4.min.css' %}"/>
<script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/responsive.bootstrap4.min.js' %}"></script>
{% endblock %}
{% block content %}
<div class="content-wrapper">
    <div class="container-fluid">
        <div class="card card-group">
            <div class="card-group">
                <!--Producto 1 al 3-->
                {% for p in principales %}
                <div class="col-4">
                    <div class="card">
                        <div class="card-header text-center text-sm">
                            <h4> {{ p.titulo }}</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-12 col-sm-6">
                                    <h3 class="d-inline-block d-sm-none"></h3>
                                    <div class="col-12">
                                        <img src="{{ p.imagen.url }}" class="product-image" alt="Product Image" >
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="py-2 px-2 mt-1">
                                        <h5 class="mt-0 text-xl-center">
                                            <small> Precio: ${{ p.precio }} </small>
                                        </h5>
                                    </div>
                                    <div class="py-2 px-2">
                                        <a href="{% url 'ecommerce:dashboard_view' p.id %}"
                                           class="btn btn-success btn btn-flat">
                                            <i class="fas fa-eye text-sm-center"></i> Ver producto
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <!--Resto de los PRODUCTOS-->
            <div class="card card-default">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card card-default">
                            <div class="card-body">
                                <table class="table" id="data">
                                    <thead>
                                    <tr>
                                        <!--                                        <th scope="col" style="width: 10%;">ID</th>-->
                                        <th scope="col" style="width: 30%;">Categor√≠a</th>
                                        <th scope="col" style="width: 30%;">Producto</th>
                                        <th scope="col" style="width: 20%;">Imagen</th>
                                        <th scope="col" style="width: 10%;">Ver</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for c in secundarios %}
                                    <tr>
                                        <!--                                        <td>{{ c.id }}</td>-->
                                        <td>{{ c.categoria.descripcion }}</td>
                                        <td>{{ c.titulo }}</td>
                                        <td>{{ c.imagen.url }}</td>
                                        <td>
                                            <a href="{% url 'ecommerce:dashboard_view' c.id %}"
                                               class="btn btn-success btn-xs btn-flat">
                                                <i class="fas fa-eye"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--FIN Resto de los PRODUCTOS-->
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
<script type="application/javascript">
    $(function () {
        $('#data').DataTable({
            paging: false,
            searching: false,
            ordering:  false,
            responsive: true,
            autoWidth: false,
            info: false,
            columnDefs: [
                {
                    targets: [-4, -3, -1],
                    class: 'text-center',
                },
                {
                    targets: [-2],
                    class: 'text-center',
                    render: function (data, type, row) {
                        return '<img src="' + data + '" class="img-fluid d-block mx-auto" style="width: 30px; height: 30px;">';
                    }
                },
            ],
        });
    });
</script>
{% endblock %}

